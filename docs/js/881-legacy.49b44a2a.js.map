{"version":3,"file":"js/881-legacy.49b44a2a.js","mappings":"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","sources":["webpack://colors-to-color-palette/./src/views/Chartjs3View.vue?80b1","webpack://colors-to-color-palette/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://colors-to-color-palette/./src/modules/pdf-generator/helpers/pdf-generator.js","webpack://colors-to-color-palette/src/views/Chartjs3View.vue","webpack://colors-to-color-palette/./src/views/Chartjs3View.vue?8e1f","webpack://colors-to-color-palette/./src/views/Chartjs3View.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chartjs3-view\"},[_c('canvas',{ref:\"canvas\"}),_c('div',[_c('button',{on:{\"click\":function($event){return _vm.exportChartToSvg()}}},[_vm._v(\"Exportar SVG\")]),_c('button',{on:{\"click\":function($event){return _vm.handleOpenPDF()}}},[_vm._v(\"Abrir PDF\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import pdfMake from \"pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\n\n// Importa src das imagens no assets\nimport srcPngImg from \"@/assets/images/img-png.png\";\nimport srcJpgImg from \"@/assets/images/img-jpg.jpg\";\nimport srcSvgImg from \"@/assets/images/img-svg.svg\";\n\n// https://stackoverflow.com/questions/46856550/pdfmake-roboto-regular-ttf-not-found-in-virtual-file-system-only-after-gulp\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nasync function generatePDF(svgChart) {\n  const srcSvgImgTxt = await (await fetch(srcSvgImg)).text();\n\n  const docDefinition = {\n    info: {\n      title: \"Criando PDF com gráficos SVG.\",\n      author: \"guilhermerodrigues680\",\n      subject:\n        \"Criando PDF com gráficos SVG usando PDFMake, Chart.js v3 e canvas2svg. Esse projeto é apenas uma prova de conceito.\",\n      creator: \"github.com/guilhermerodrigues680/pdfmake-with-chart\",\n    },\n    // pageSize: {\n    //   width: canvas.width,\n    //   height: \"auto\",\n    // },\n    // [left, top, right, bottom] or [horizontal, vertical] or just a number for equal margins\n    // pageMargins: [0, 0, 0, 0],\n    content: [\n      {\n        columns: [\n          {\n            image: \"img1\",\n            width: \"*\",\n            fit: [80, 80],\n            alignment: \"left\",\n          },\n          {\n            svg: srcSvgImgTxt,\n            width: \"*\",\n            fit: [50, 50],\n            alignment: \"right\",\n            margin: [0, 15, 0, 0],\n          },\n        ],\n      },\n      {\n        margin: [0, 64, 0, 32],\n        columns: [\n          {\n            text: \"Multiple styles applied\",\n            fontSize: 35,\n            bold: true,\n            color: \"#4297FA\",\n            width: \"*\",\n          },\n          {\n            image: \"img2\",\n            fit: [226, 180],\n            width: \"*\",\n            alignment: \"right\",\n          },\n        ],\n      },\n      \"SVG nodes behave similar to images by supporting width/height or fit\",\n      \"It is however not yet possible to use svg files or to have a library of svgs in the document definition\",\n      \"\\n\",\n      \"Note that before you can use SVG nodes you must install svg-to-pdfkit as it is not included with pdfmake to keep bundle size down\",\n      {\n        text: \"You can also fit the svg inside a rectangle\",\n        pageBreak: \"after\",\n      },\n      \"Gráfico SVG\",\n      // {\n      //   svg: svgChart,\n      //   fit: [300, 300],\n      // },\n      // // https://github.com/bpampuch/pdfmake/blob/master/src/standardPageSizes.js\n      // {\n      //   text: \"text 3\",\n      //   absolutePosition: { x: 595.28 / 2, y: 841.89 / 2 },\n      // },\n      {\n        svg: svgChart,\n        fit: [300, 300],\n        absolutePosition: { x: 0, y: 841.89 / 2 },\n      },\n    ],\n\n    images: {\n      img1: new URL(srcJpgImg, window.location).toString(),\n      img2: new URL(srcPngImg, window.location).toString(),\n    },\n\n    // styles: {\n    //   rightme: {\n    //     alignment: \"right\",\n    //   },\n    // },\n  };\n\n  const pdfDoc = pdfMake.createPdf(docDefinition);\n\n  return new Promise((resolve) => pdfDoc.getBlob((blob) => resolve(blob)));\n}\n\nexport { generatePDF };\n","<template>\n  <div class=\"chartjs3-view\">\n    <canvas ref=\"canvas\"></canvas>\n    <div>\n      <button @click=\"exportChartToSvg()\">Exportar SVG</button>\n      <button @click=\"handleOpenPDF()\">Abrir PDF</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { saveAs } from \"file-saver\";\nimport Chart from \"chart.js/auto\";\nimport C2S from \"@/modules/export/helpers/canvas2svg-with-tweak\";\nimport { generatePDF } from \"@/modules/pdf-generator/helpers/pdf-generator\";\n\nconst data = {\n  labels: [0, 1, 2, 3, 4],\n  datasets: [\n    {\n      label: \"Dataset 1\",\n      data: [10, 11, 12, 13, 14],\n      backgroundColor: \"#FF0000\",\n    },\n    {\n      label: \"Dataset 2\",\n      data: [20, 21, 22, 23, 24],\n      backgroundColor: \"#0000FF\",\n    },\n    {\n      label: \"Dataset 3\",\n      data: [30, 31, 32, 33, 34],\n      backgroundColor: \"#00FF00\",\n    },\n  ],\n};\n\n/** @type {import('chart.js').ChartConfiguration} */\nconst config = {\n  type: \"bar\",\n  data: data,\n  options: {\n    plugins: {\n      title: {\n        display: true,\n        text: \"Chart.js Bar Chart - Stacked\",\n      },\n    },\n    // desablitar maintainAspectRatio permite criar gráficos de qualquer tamanho.\n    // maintainAspectRatio: false,\n    // desabilitar responsive e animations faz o canvas2svg funcionar.\n    responsive: false,\n    animation: false,\n\n    scales: {\n      x: {\n        stacked: true,\n      },\n      y: {\n        stacked: true,\n      },\n    },\n  },\n};\n\nexport default {\n  name: \"Chartjs3View\",\n\n  data: () => ({\n    // Técnica para o vue não deixar o objeto reativo\n    chart: Object.freeze({ chart: null }),\n  }),\n\n  mounted() {\n    this.run();\n  },\n\n  methods: {\n    run() {\n      // set the output dimensions (helpful especially for PNG)\n      const width = 300;\n      const height = 200;\n\n      // set the chart's size based on the values we set at the top\n      /** @type {{canvas: HTMLCanvasElement}} */\n      const { canvas } = this.$refs;\n      canvas.width = width;\n      canvas.height = height;\n\n      // create the chart\n      const chart = new Chart(canvas, config);\n      this.chart = Object.freeze({ chart });\n\n      console.debug({ chart });\n    },\n\n    async handleOpenPDF() {\n      // TODO: refatorar\n      const { chart } = this.chart;\n      console.debug({ chart });\n      if (chart.options.animation !== false) {\n        console.warn(\n          'Cannot create SVG: \"animation\" is not set to false (see the options section)'\n        );\n        return;\n      }\n      if (chart.options.responsive !== false) {\n        console.warn(\n          'Cannot create SVG: \"responsive\" is not set to false (see the options section)'\n        );\n        return;\n      }\n\n      /** @type {{canvas: HTMLCanvasElement}} */\n      const { canvas } = this.$refs;\n      const chartCanvas = canvas;\n      const svgContext = new C2S(chartCanvas.offsetWidth, chartCanvas.offsetHeight);\n      new Chart(svgContext, config);\n      const mySerializedSVG = svgContext.getSerializedSvg();\n      const svg = svgContext.getSvg();\n      console.debug({ mySerializedSVG, svg });\n\n      const blob = await generatePDF(mySerializedSVG);\n      window.open(URL.createObjectURL(blob), \"_blank\");\n    },\n\n    exportChartToSvg() {\n      const { chart } = this.chart;\n      console.debug({ chart });\n      if (chart.options.animation !== false) {\n        console.warn(\n          'Cannot create SVG: \"animation\" is not set to false (see the options section)'\n        );\n        return;\n      }\n      if (chart.options.responsive !== false) {\n        console.warn(\n          'Cannot create SVG: \"responsive\" is not set to false (see the options section)'\n        );\n        return;\n      }\n\n      console.debug({ C2S });\n\n      /** @type {{canvas: HTMLCanvasElement}} */\n      const { canvas } = this.$refs;\n      const chartCanvas = canvas;\n\n      // get the dimensions of our original chart\n      // create an svg version of the chart\n      const svgContext = new C2S(chartCanvas.offsetWidth, chartCanvas.offsetHeight);\n\n      console.debug({ svgContext });\n\n      const svgChart = new Chart(svgContext, config);\n\n      console.debug({ svgChart });\n\n      //serialize your SVG\n      const mySerializedSVG = svgContext.getSerializedSvg(); //true here, if you need to convert named to numbered entities.\n      //If you really need to you can access the shadow inline SVG created by calling:\n      const svg = svgContext.getSvg();\n      console.debug({ mySerializedSVG, svg });\n\n      const filename = \"mySerializedSVG.svg\";\n      const blob = new Blob([mySerializedSVG], { type: \"image/svg+xml\" });\n      saveAs(blob, filename);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.chartjs3-view {\n  width: 90%;\n  margin: 2em auto 0 auto;\n}\n\ncanvas {\n  display: block;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Chartjs3View.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Chartjs3View.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chartjs3View.vue?vue&type=template&id=98382e9e&scoped=true&\"\nimport script from \"./Chartjs3View.vue?vue&type=script&lang=js&\"\nexport * from \"./Chartjs3View.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chartjs3View.vue?vue&type=style&index=0&id=98382e9e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"98382e9e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","$event","exportChartToSvg","_v","handleOpenPDF","staticRenderFns","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","generatePDF","svgChart","fetch","srcSvgImg","text","srcSvgImgTxt","docDefinition","title","author","subject","creator","content","columns","image","width","fit","alignment","svg","margin","fontSize","bold","color","pageBreak","absolutePosition","x","y","images","img1","URL","srcJpgImg","window","location","toString","img2","srcPngImg","pdfDoc","pdfMake","getBlob","blob","pdfFonts","labels","datasets","label","data","backgroundColor","type","options","plugins","display","responsive","animation","scales","stacked","name","chart","mounted","methods","run","canvas","console","chartCanvas","svgContext","mySerializedSVG","C2S","saveAs","component"],"sourceRoot":""}